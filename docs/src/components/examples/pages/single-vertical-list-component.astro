---
import SingleVerticalListOfPokemonsVue from "@/components/examples/vue/SingleVerticalListOfPokemons.vue";
import SingleVerticalListOfPokemonsSvelte from "@/components/examples/svelte/SingleVerticalListOfPokemons.svelte";

import ExampleLayout from "@/components/examples/ExampleLayout.astro";
import Accordion from "@/components/Accordion.astro";
import {getI18N} from '@/i18n/index.ts';  
import { type FRAMEWORKS_TYPE } from "@/types";

interface Props {
  framework: FRAMEWORKS_TYPE;
}
const { currentLocale } = Astro;
const { framework } = Astro.props;
const i18n = getI18N({ currentLocale });
const verticalList=`
<script setup lang="ts">
import { ref } from "vue";
import { useDragAndDrop } from "fluid-dnd/vue";
import type { Pokemon } from "./Pokemon";
import PokemonComponent from "./PokemonComponent.vue";
import { fetchPokemons } from "@/server/pokemonServer";

const pokemons = ref([] as Pokemon[]);
pokemons.value = await fetchPokemons(9);
const [ parent ] = useDragAndDrop(pokemons,{
  draggingClass: "dragging-pokemon"
});
</script>
<template>
  <div class="flex max-sm:justify-center items-start">
    <div
      ref="parent"
      class="bg-gray-200/60 border-solid border-black/40 rounded-2xl w-60 border-4 p-4 block"
    >
      <PokemonComponent
        v-for="(pokemon, index) in pokemons"
        :key="pokemon.name"
        :index="index"
        :pokemon="pokemon"
      />
    </div>
  </div>
</template>
`
const verticalListSvelteCode=`
  <script lang="ts">
  import { useDragAndDrop } from "fluid-dnd/svelte";
  import type { Pokemon } from "./Pokemon";
  import PokemonComponent from "./PokemonComponent.svelte";
  import { fetchPokemons } from "@/server/pokemonServer";

  let pokemons = $state([] as Pokemon[]);
  fetchPokemons(9).then((newPokemons) => {
      pokemons.push(...newPokemons);
  });
  const [ parent ] = useDragAndDrop(pokemons, {
    draggingClass: "dragging-pokemon",
  });
  </script>
  <div class="flex max-sm:justify-center items-start">
    <div
      use:parent
      class="bg-gray-200/60 border-solid border-black/40 rounded-2xl w-60 border-4 p-4 block"
    >
    {#each pokemons as pokemon, index (pokemon.name)}
      <PokemonComponent
        index={index}
        pokemon={pokemon}
      />
    {/each}
    </div>
  </div>
  `
const code = framework === 'vue' ? verticalList : verticalListSvelteCode;
const fileName = `SingleVerticalListOfPokemons.${framework}`;
const buttonText = framework === 'vue' ? i18n.VUE_CODE_MESSAGE : i18n.SVELTE_CODE_MESSAGE;
---
<ExampleLayout title={i18n.SINGLE_VERTICAL_LIST}>
  {framework === 'vue' && <SingleVerticalListOfPokemonsVue client:load />}
  {framework === 'svelte' && <SingleVerticalListOfPokemonsSvelte client:load />}
   <Accordion  buttonText={buttonText} code={code} fileName={fileName} lang={framework}/>
</ExampleLayout>

<style>
 select {
    background-color: auto !important;
  }

</style>